import requests
import json

cookies = {
    'XSRF-TOKEN':
    "eyJpdiI6ImNmR1JSSEVQL2taOUx1VmhiTWxNSGc9PSIsInZhbHVlIjoiUElFaXNFeGdidXpCM0NBaUw5Zm1XSnVJaytDT2p3bml1ZXJ4YjNyNEI0NnNGaWpJMlYxa3duTmlpREkycHpvQm9xcDBJV3lYSFVybG1nY0RpSFJWVCtxWUVUYlo5MVRTblg3OWMydEFMc05qbldnL3BIVjBwUFl5NHgzYy9IbUoiLCJtYWMiOiJmOGIyYTdlZTcyODk3ODM0ZmE1ZDhmNjU1NTc1ZmE2ZTI2ODI1NjkyM2ExMmNmNWVmYTA5YzRmMzEyY2NkZjYxIiwidGFnIjoiIn0=",
    'laravel_session': "eyJpdiI6ImVLMDM2TGJ6cS9vV3RxMmtXOUk5c2c9PSIsInZhbHVlIjoicWs4SXRGOXdmVkR1Rm1KTGYxV0tpQzFpemxMSHMwRzhMQmg1R2ZHVlRMYmxsWlVVTSs4QndwdlBrTGVVbktVSWFHRE4wZWRYUW5ZdlpLbTlrTm9OaDVtQlVVOStvY0dveHlOMytuelFYaG1BUVg4RGpzdU1QWFJJZWJrVGFhc24iLCJtYWMiOiI5NGQwNDExNmM4ZmNmYWQzNGJlYjg0ZWMyZGIxOTBkMWE4ZWE2OTJkNGU2MGFmYjc0YTY5MDE3N2MxNjg4ZmRkIiwidGFnIjoiIn0="
}

headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:101.0) Gecko/20100101 Firefox/101.0',
    'Accept': '*/*',
    'Accept-Language': 'en-GB,en-US;q=0.7,en;q=0.3',
    'Accept-Encoding': 'gzip, deflate, br',
    'Referer': 'https://nas.gov.in/report-card/nas-2021',
    'Authorization': "Bearer $2y$10$Y8lv.M9vBmgHTVTTSrNMHeeXHBE/onZ2en1d0.rjlpyLUPglgX4/2",
    'X-Requested-With': 'XMLHttpRequest',
    'DNT': '1',
    'Connection': 'keep-alive',
    'Sec-Fetch-Dest': 'empty',
    'Sec-Fetch-Mode': 'cors',
    'Sec-Fetch-Site': 'same-origin',
    'Sec-GPC': '1',
}

district_ids = ['1701', '1702', '1703', '1704', '1705', '1706', '1707', '1708', '1709', '1710', '1711', '1712', '1713', '1714', '1715','1716', '1717', '1718', '1719', '1720', '1721', '1722', '1723', '1724', '1725', '1726', '1727', '1728', '1729', '1730', '1731', '1732','1733', '1401', '1402', '1403', '1404', '1405', '1407', '1408', '1409', '1410', '1411', '1412', '1413', '1301', '1406', '2101', '2102','2103', '2104', '2201', '2202', '2203', '2204', '2205', '2206', '2207', '2208', '2209', '2210', '2211', '2212', '2213', '2214', '2215','2216', '2217', '2218', '2219', '2220', '2221', '2222', '2223', '2301', '2302', '2303', '2304', '2305', '2306', '2307', '2308', '2309','2310', '2311', '2401', '2402', '2403', '2404', '2405', '2406', '2407', '2408', '2409', '2411', '2412', '2413', '2414', '2416', '2501','2502', '2503', '2504', '2505', '2506', '2507', '2508', '2601', '2602', '2603', '2604', '2605', '2606', '2410', '2607', '2608', '2701','2702', '2703', '2704', '2705', '2706', '2707', '2708', '2709', '2710', '2711', '4001', '4002', '4101', '4401', '4402', '4403', '4404','4501', '4502', '4503', '3701', '3702', '3703', '3704', '3705', '3706', '3707', '3708', '3709', '3710', '3711', '3712', '3713', '3714','3715', '3716', '3717', '3718', '3719', '3720', '3721', '3722', '3723', '3724', '3725', '3726', '3727', '3728', '3729', '3730', '3731','3732', '3733', '3734', '3735', '3736', '4201', '4202', '4203', '4204', '4205', '4206', '4207', '4208', '4209', '4210', '4211', '4212','4213', '4214', '1801', '1802', '1803', '1804', '1805', '1806', '1807', '1808', '1809', '1810', '1811', '1812', '1813', '1814', '1815','1816', '1817', '1818', '1819', '1820', '1821', '1822', '1823', '1824', '1825', '1826', '1827', '1828', '1829', '1830', '1831', '1832','1833', '1834', '1835', '1836', '1837', '1838', '1839', '1840', '1841', '1842', '1843', '1844', '1845', '1846', '1847', '1848', '1849','1850', '1851', '1852', '1853', '1854', '1855', '1856', '1857', '1858', '1859', '1860', '1861', '1862', '1863', '1864', '1865', '1866','1867', '1868', '1869', '1870', '1871', '1872', '1873', '1874', '1875', '2801', '2802', '2803', '2804', '2805', '2806', '2807', '2808','2809', '2810', '2811', '2812', '2813', '2814', '2815', '2816', '2817', '2818', '2819', '2820', '2821', '2822', '2823', '2824', '2825','2826', '2827', '2828', '2829', '2830', '2831', '2832', '2833', '3401', '3402', '3403', '3404', '3405', '3406', '3407', '3408', '3409','3410', '3411', '3412', '3413', '3414', '3415', '3416', '3417', '3418', '3419', '3420', '3421', '3422', '3423', '3424', '3425', '3426','3427', '3428', '3429', '3430', '3431', '3432', '3433', '1501', '1502', '1503', '1504', '1505', '1506', '1507', '1508', '1509', '1510','1511', '1512', '1513', '1514', '1515', '1516', '1517', '1518', '1519', '1520', '1521', '1522', '2001', '2002', '2003', '2004', '2005','2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022','2023', '2024', '2025', '2026', '2027', '2028', '2029', '2030', '2031', '2032', '2033', '2034', '2035', '2036', '2037', '2038', '1001','1002', '1003', '1004', '1005', '1006', '1009', '1010', '1011', '1012', '1013', '1014', '1015', '1016', '1017', '1018', '1019', '1020','1021', '1022', '1101', '1102', '1103', '1104', '1105', '1106', '1107', '1108', '1109', '1110', '1111', '1112', '3301', '3302', '3303','3304', '3305', '3306', '3307', '3308', '3309', '3310', '3311', '3312', '3313', '3314', '3315', '3316', '3317', '3318', '3319', '3320','3321', '3322', '3323', '3324', '3325', '3326', '3327', '3328', '3329', '3330', '3331', '3332', '3333', '3334', '3335', '3336', '3337','3338', '3339', '3340', '3341', '3342', '3343', '3344', '3345', '3346', '3347', '3348', '3349', '3350', '3351', '2415', '3001', '3002','3003', '3004', '3005', '3006', '3007', '3008', '3009', '3010', '3011', '3012', '3013', '3014', '3015', '3016', '3017', '3018', '3019','3020', '3021', '3022', '3023', '3024', '3352', '2224', '2225', '2226', '2903', '2909', '2905', '2906', '2925', '2911', '2916', '2910','2918', '2921', '2917', '2904', '2912', '2919', '2914', '2923', '2907', '2913', '2901', '2924', '2922', '2902', '2908', '2915', '4302','4329', '4301', '4305', '4309', '4306', '4304', '4307', '4308', '4310', '4312', '4311', '4322', '4317', '4316', '4318', '4303', '4314','4315', '4313', '4319', '4325', '4320', '4321', '4324', '4323', '4327', '4326', '4328', '4330', '4331', '4332', '1007', '1008', '3201','3202', '3203', '3204', '3205', '3206', '3207', '3208', '3209', '3210', '3211', '3212', '3213', '3214', '3215', '3216', '3217', '3218','3219', '3220', '3221', '3222', '3223', '3224', '3225', '3226', '3227', '3101', '3102', '3103', '3104', '3105', '3106', '3107', '3108','3109', '3110', '3111', '3112', '3113', '3114', '3115', '3116', '3117', '3118', '3119', '3120', '3121', '3122', '3123', '3124', '3125','3126', '3127', '3128', '3129', '3130', '1601', '1602', '1603', '1604', '1605', '1606', '1607', '1608', '1609', '1610', '1611', '1612','1613', '1201', '1202', '1203', '1204', '1205', '1206', '1207', '1208', '1209', '1210', '1211', '1212', '1213', '1214', '1215', '1216','1217', '1218', '1219', '1220', '1221', '1222', '4601', '4602', '4603', '4604', '4605', '4606', '4607', '4608', '4609', '4610', '4611','4612', '4613', '4614', '4615', '4616', '4617', '4618', '4619', '4620', '4621', '4622', '4623', '4624', '4625', '4626', '4627', '4628','4629', '4630', '4631', '4632', '4633', '3801', '3802', '3803', '3804', '3805', '3806', '3807', '3808', '3809', '3810', '3811', '3812','3813', '3901', '3902', '3903', '3904', '3905', '3906', '3907', '3908', '3909', '3910', '3911', '3912', '3913', '3914', '3915', '3916','3917', '3918', '3919', '3920', '3921', '3922', '3923', '3924', '3925', '3926', '3927', '3928', '3929', '3930', '3931', '3932', '3933','3934', '3501', '3502', '3601']

state_feedback = {}

# for x in range(1,38):
for x in range(1,2):
# for x in district_ids:
  # feedback_url = 'https://nas.gov.in/apisadmin/items/pq_state_level_feedback?limit=-1&filter={%22state_id%22:{%22_eq%22:' + str(x) + '},%22grade%22:{%22_eq%22:%2211%22}}'
  # participation_url = 'https://nas.gov.in/apisadmin/items/all_grade_state_participation_tbl?limit=-1&filter={%22state_id%22:{%22_eq%22:' + str(x) + '}}'
  # learning_outcomes_url = 'https://nas.gov.in/apisadmin/items/state_grade_level_learningoutcome?limit=-1&filter={%22state_id%22:{%22_eq%22:' + str(x) + '}}'
  # performance_url = 'https://nas.gov.in/apisadmin/items/state_grade_level_performance?limit=-1&filter={%22state_id%22:{%22_eq%22:' + str(x) + '}}'
  # state_url = "https://nas.gov.in/apisadmin/items/state_masters?limit=-1&filter={}"

  # district_url = "https://nas.gov.in/apisadmin/items/district_masters?limit=-1&filter={}"
  # district_url = "https://nas.gov.in/apisadmin/items/all_grade_participation_tbl?limit=-1&filter={}"
  district_url = "https://nas.gov.in/apisadmin/items/pq_district_level_feedback?limit=-1&filter={}"
  # district_url = "https://nas.gov.in/apisadmin/items/district_grade_level_learningoutcome?limit=-1&filter={}"
  # district_url = "https://nas.gov.in/apisadmin/items/performance_master?limit=-1&filter={%22district_id%22:{%22_eq%22:" + x + "}}"
  # district_url = "https://nas.gov.in/apisadmin/items/all_grade_participation_tbl?limit=-1&filter={%22district_id%22:{%22_eq%22:" + x + "}}"
  # district_url = "https://nas.gov.in/apisadmin/items/district_grade_level_learningoutcome?limit=-1&filter={%22district_id%22:{%22_eq%22:" + x + "}}"
  # district_url = "https://nas.gov.in/apisadmin/items/pq_district_level_feedback?limit=-1&filter={%22district_id%22:{%22_eq%22:" + x + "}}"
  
  response = requests.get(district_url, headers=headers, cookies=cookies)

  data = response.json()
  data = data['data']
  to_write = data
  # state_id = "state " + str(x)
  # to_write[state_id] = data
  print(x)

print(data[-1])
with open("NAS_feedback_district.json", 'w+', encoding='utf-8') as f:
  f.write(json.dumps(to_write))
  # f.write(json.dumps(data))